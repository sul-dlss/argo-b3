<%= content_for :title, 'Home page' %>

<%= render Search::FormComponent.new(search_form: @search_form, url: home_path, label: 'Search for items, tags or projects:') %>

<%= render Search::CurrentFiltersComponent.new(search_form: @search_form) %>

<%= render Search::LayoutComponent.new do |layout| %>
  <%= layout.with_main_content do %>
    <% if @projects_search_form %>
      <%= turbo_frame_tag 'projects-search', src: search_projects_path(@projects_search_form.attributes) do %>
        <%= render Search::LoadingFacetResultsComponent.new(label: 'Project results') %>
      <% end %>
    <% end %>

    <% if @tags_search_form %>
      <%= turbo_frame_tag 'tags-search', src: search_tags_path(@tags_search_form.attributes) do %>
        <%= render Search::LoadingFacetResultsComponent.new(label: 'Tag results') %>
      <% end %>
    <% end %>

    <% if @items_search_form %>
      <%= turbo_frame_tag 'items-search', src: search_items_path(@items_search_form.attributes) do %>
        <%= render Search::LoadingItemResultsComponent.new %>
      <% end %>
    <% end %>
  <% end %>

  <%= layout.with_sidebar do %>
    <%= render Search::FacetsSectionComponent.new(search_form: @search_form) %>
  <% end %>
<% end %>

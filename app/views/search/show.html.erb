<%= content_for :title, 'Home page' %>

<%= render Search::FormComponent.new(search_form: @search_form, url: search_path) %>

<%= render Search::CurrentFiltersComponent.new(search_form: @search_form) %>

<%= render Search::LayoutComponent.new do |layout| %>
  <%= layout.with_main_content do %>
    <% if !@search_form.facets_selected? && @search_form.query.present? %>
      <%= turbo_frame_tag 'projects-search', src: search_projects_path(@search_form.attributes) do %>
        <%= render Search::LoadingFacetResultsComponent.new(label: 'Project results') %>
      <% end %>
      <%= turbo_frame_tag 'tags-search', src: search_tags_path(@search_form.attributes) do %>
        <%= render Search::LoadingFacetResultsComponent.new(label: 'Tag results') %>
      <% end %>
      <%= turbo_frame_tag 'tickets-search', src: search_tickets_path(@search_form.attributes) do %>
        <%= render Search::LoadingFacetResultsComponent.new(label: 'Ticket results') %>
      <% end %>
    <% end %>

    <%= turbo_frame_tag 'items-search', src: search_items_path(@search_form.attributes) do %>
      <%= render Search::LoadingItemResultsComponent.new if @search_form.present? %>
    <% end %>

    <%= turbo_frame_tag 'items-search-secondary', src: secondary_facets_search_items_path(@search_form.attributes) %>
  <% end %>

  <%= layout.with_sidebar do %>
    <%= render Search::FacetsSectionComponent.new(search_form: @search_form) %>
  <% end %>
<% end %>
